[Unit]
Description=Elastic-Search Server
After=network.target

[Install]
WantedBy=multi-user.target

[Service]
Type=simple

LimitNOFILE=524288
LimitNPROC=524288

Restart=always
RestartSec=10

TimeoutSec=30

User=__USER_NAME__
Group=__GROUP_NAME__

Environment='JAVA_HOME=__JDK_INSTALL_FOLDER__'

ExecStart='__INSTALL_FOLDER__/bin/elasticsearch'
ExecStopPost=/bin/bash -c -e '\
    cd \'__INSTALL_FOLDER__/logs\' && \
    find \'.\' -not -name \'.\' -delete \
'